!function(e,t,n){t.FES={singleton:{},gaInitialized:!1,isStringValidJson:function(e){return"string"!=typeof e||e.length<2?!1:/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},getMeta:function(n){var a=e(n);if(a.length>0){var r=a.data("cookieString");r.hasOwnProperty("n")&&r.hasOwnProperty("e")&&(t.FES.singleton.encryption=new t.FES.Encryption,t.FES.singleton.encryption.setPublic(r.n,r.e)),t.FES.base_url=a.data("baseUrl"),t.FES.googleAnalyticsId=a.data("gaId"),a.remove()}},contentTransition:function(t,n,a){if(!t||!n)return!1;var r=e(t),i=e(n).css("display","none"),o=(a||800)/2;r.length>0?(r.html("<div class='stretch-block'>"+r.html()+"</div>"),r.find("> div").each(function(t,n){e(n).fadeOut(o,function(){r.empty(),r.append(i),e(document).trigger("new_content_loaded"),i.fadeIn(o,function(){e(document).trigger("content_transition_end")})})})):console.warn("could not find "+t+" in the DOM...")},submitOnClick:function(t){return t.preventDefault(),e(this).closest("form").submit(),!1},removeOnClick:function(t){return t.preventDefault(),e(this).closest("[data-remove-target]").remove(),!1},expandOnClick:function(t){t.preventDefault();var n=e(this);n.toggleClass("clicked");var a=e("#"+n.data("expand"));return a&&a.length>0&&(a.hasClass("active")?a.fadeOut(300,function(){a.removeClass("active")}):a.fadeIn(400,function(){a.addClass("active")})),!1},removeNotifications:function(){e(".notifications").each(function(t,n){var a=e(n);setTimeout(function(){a.slideUp(300,function(){a.remove()})},15e3)})},onFormSubmit:function(n){n.preventDefault();var a=e(this),r=a.serializeObject();return r&&"string"==typeof r.password&&r.password.length>0&&(r.password=t.FES.singleton.encryption.encrypt(r.password)),a.find(".help-block").remove(),a.find(".error").removeClass("error"),e.ajax({type:a.attr("method"),async:!0,url:a.attr("action"),data:r,dataType:"html",crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(e){return 0===e.indexOf("http")?void(t.location.href=e):void t.FES.contentTransition("body",e,600)},error:function(n){if(t.FES.isStringValidJson(n.responseText)){var r=JSON.parse(n.responseText);for(var i in r)if("fields"===i)for(var o in r[i])a.find('[name^="'+o+'"]').each(function(t,n){var a=e(n);a.addClass("error"),a.parent().append(e('<div class="help-block error">'+r[i][o]+"</div>"))});else a.prepend(e('<div class="help-block error">'+r[i]+"</div>"))}else console.error("Error Received: ",n.responseText)}}),!1},onDataLoadClick:function(n){n.preventDefault();var a=e(this),r=a.data("load"),i={table:r,getTemplate:"true"};return"string"!=typeof r||r.length<=0?!1:(e.ajax({type:"GET",async:!0,url:t.FES.base_url+"/tabledata",data:i,crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(e){t.FES.currentTable={id:i.table},t.FES.contentTransition("#datatable",e,400)},error:function(e){console.error("error received: ",e.responseText)}}),!1)},sendGaEvent:function(t){if(!t||0===t.length)return!1;e(document).trigger("ga:init");var n=t.split("=");if(n.length>1){var a=n[0];n.splice(0,1),ga("send","event",a,n.join("="))}else ga("send",n[0]);return!0},startGaListeners:function(){e(document).on("ga:init",function(){if(!t.FES.gaInitialized&&t.FES.googleAnalyticsId)try{ga("create",t.FES.googleAnalyticsId,"auto"),t.FES.gaInitialized=!0}catch(e){}}),e(document).on("ga:send",function(){t.FES.sendGaEvent("pageview")}),e(document).on("ga:scan",function(){e(document).find("[data-auto-track]").each(function(n,a){var r=e(a),i=r.data("autoTrack");r.remove(),t.FES.sendGaEvent(i)})}),e(document).on("content_transition_end",function(){e(document).trigger("ga:scan")}),e(document).on("click","[data-track]",function(n){t.FES.sendGaEvent(e(this).data("track"))})},globalCellWriter:function(e,t){var n=e.id,a="<td class='data-cell "+n+"'>",r=t[n];return r&&(a+="price"===n||"msrp"===n||"priceEach"===n?"$"+parseFloat(r).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"creditLimit"===n||"amount"===n?0!=r?"$"+parseFloat(r).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/a":r),a+"</td>"}}}(jQuery,window),function(e,t,n){t.FES.Encryption=function(){this.rsa=new RSAKey,this.setPublic=function(e,t){return this.rsa.setPublic(e,t)},this.encrypt=function(e){return this.rsa.encrypt(e)}}}(jQuery,window),function(e,t,n){e(document).ready(function(){e(document).on("submit","form",t.FES.onFormSubmit),e(document).on("click","[data-load]",t.FES.onDataLoadClick),e(document).on("click","[data-submit]",t.FES.submitOnClick),e(document).on("click","[data-remove]",t.FES.removeOnClick),e(document).on("click","[data-expand]",t.FES.expandOnClick),e(document).on("remove_notifications",t.FES.removeNotifications),e(document).trigger("remove_notifications"),e(document).on("content_transition_end",function(){e(document).trigger("remove_notifications")}),t.FES.startGaListeners()}),e(function(){t.FES.getMeta("#page-meta"),e(document).trigger("ga:send"),e(document).on("content_transition_end",function(){if(!e.isEmptyObject(t.FES.currentTable)){var n=e("#"+t.FES.currentTable.id);n.length>0&&n.dynatable({features:{pushState:!1,search:!0},inputs:{queryEvent:"blur change",processingText:""},writers:{_cellWriter:t.FES.globalCellWriter},dataset:{ajax:!0,ajaxUrl:t.FES.base_url+"/tabledata",ajaxCache:null,ajaxOnLoad:!0,ajaxMethod:"GET",ajaxDataType:"json",ajaxData:{table:t.FES.currentTable.id},perPageDefault:50,perPageOptions:[20,50,100,200],records:[]}})}})})}(jQuery,window);