!function(e,t,n){t.FES={singleton:{},isStringValidJson:function(e){return"string"!=typeof e||e.length<2?!1:/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},getMeta:function(n){var r=e(n);if(r.length>0){var o=r.data("cookieString");o.hasOwnProperty("n")&&o.hasOwnProperty("e")&&(t.FES.singleton.encryption=new t.FES.Encryption,t.FES.singleton.encryption.setPublic(o.n,o.e)),t.FES.base_url=r.data("baseUrl"),r.remove()}},contentTransition:function(t,n,r){if(!t||!n)return!1;var o=e(t),a=e(n).css("display","none"),i=(r||800)/2;o.length>0?(o.html("<div class='stretch-block'>"+o.html()+"</div>"),o.find("> div").each(function(t,n){e(n).fadeOut(i,function(){o.empty(),o.append(a),e(document).trigger("new_content_loaded"),a.fadeIn(i,function(){e(document).trigger("content_transition_end")})})})):console.warn("could not find "+t+" in the DOM...")},submitOnClick:function(t){return t.preventDefault(),e(this).closest("form").submit(),!1},removeOnClick:function(t){return t.preventDefault(),e(this).closest("[data-remove-target]").remove(),!1},removeNotifications:function(){e(".notifications").each(function(t,n){var r=e(n);setTimeout(function(){r.slideUp(300,function(){r.remove()})},15e3)})},onFormSubmit:function(n){n.preventDefault();var r=e(this),o=r.serializeObject();return o&&"string"==typeof o.password&&o.password.length>0&&(o.password=t.FES.singleton.encryption.encrypt(o.password)),r.find(".help-block").remove(),r.find(".error").removeClass("error"),console.log(o),e.ajax({type:r.attr("method"),async:!0,url:r.attr("action"),data:o,dataType:"html",crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(e){return 0===e.indexOf("http")?void(t.location.href=e):void t.FES.contentTransition("body",e,600)},error:function(n){if(t.FES.isStringValidJson(n.responseText)){var o=JSON.parse(n.responseText);for(var a in o)if("fields"===a)for(var i in o[a])r.find('[name^="'+i+'"]').each(function(t,n){var r=e(n);console.log(o,a,o[a],i),r.addClass("error"),r.parent().append(e('<div class="help-block error">'+o[a][i]+"</div>"))});else r.prepend(e('<div class="help-block error">'+o[a]+"</div>"))}else console.error("Error Received: ",n.responseText)}}),!1},onDataLoadClick:function(n){n.preventDefault();var r=e(this),o=r.data("load"),a={table:o,getTemplate:"true"};return"string"!=typeof o||o.length<=0?!1:(e.ajax({type:"GET",async:!0,url:t.FES.base_url+"/tabledata",data:a,crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(e){t.FES.currentTable={id:a.table},t.FES.contentTransition("#datatable",e,400)},error:function(e){console.error("error received: ",e.responseText)}}),!1)},globalCellWriter:function(e,t){var n=e.id,r="<td class='data-cell "+n+"'>",o=t[n];return o&&(r+="price"===n||"msrp"===n||"priceEach"===n?"$"+parseFloat(o).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"creditLimit"===n||"amount"===n?0!=o?"$"+parseFloat(o).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/a":o),r+"</td>"}}}(jQuery,window),function(e,t,n){t.FES.Encryption=function(){this.rsa=new RSAKey,this.setPublic=function(e,t){return this.rsa.setPublic(e,t)},this.encrypt=function(e){return this.rsa.encrypt(e)}}}(jQuery,window),function(e,t,n){e(document).ready(function(){e(document).on("submit","form",t.FES.onFormSubmit),e(document).on("click","[data-load]",t.FES.onDataLoadClick),e(document).on("click","[data-submit]",t.FES.submitOnClick),e(document).on("click","[data-remove]",t.FES.removeOnClick),e(document).on("remove_notifications",t.FES.removeNotifications),e(document).trigger("remove_notifications"),e(document).on("content_transition_end",function(){e(document).trigger("remove_notifications")})}),e(function(){t.FES.getMeta("#page-meta"),e(document).on("content_transition_end",function(){if(!e.isEmptyObject(t.FES.currentTable)){var n=e("#"+t.FES.currentTable.id);n.length>0&&n.dynatable({features:{pushState:!1,search:!1},writers:{_cellWriter:t.FES.globalCellWriter},dataset:{ajax:!0,ajaxUrl:t.FES.base_url+"/tabledata",ajaxCache:null,ajaxOnLoad:!0,ajaxMethod:"GET",ajaxDataType:"json",ajaxData:{table:t.FES.currentTable.id},perPageDefault:50,perPageOptions:[10,20,50,100],records:[]}})}})})}(jQuery,window);