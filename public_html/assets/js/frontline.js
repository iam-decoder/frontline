!function(t,n,e){n.FES={singleton:{},isStringValidJson:function(t){return"string"!=typeof t||t.length<2?!1:/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},getMeta:function(e){var r=t(e);if(r.length>0){var o=r.data("cookieString");o.hasOwnProperty("n")&&o.hasOwnProperty("e")&&(n.FES.singleton.encryption=new n.FES.Encryption,n.FES.singleton.encryption.setPublic(o.n,o.e)),n.FES.base_url=r.data("baseUrl"),r.remove()}},generateDataTable:function(t){console.log("generateDataTable: ",t)},contentTransition:function(n,e,r){if(!n||!e)return!1;var o=t(n),a=t(e).css("display","none"),i=(r||800)/2;o.length>0?o.find("> *").each(function(n,e){t(e).fadeOut(i,function(){o.empty(),o.append(a),a.fadeIn(i,function(){t(document).trigger("content_transition_end")})})}):console.warn("could not find "+n+" in the DOM...")},onFormSubmit:function(e){e.preventDefault();var r=t(this),o=r.serializeObject();return o&&"string"==typeof o.password&&o.password.length>0&&(o.password=n.FES.singleton.encryption.encrypt(o.password)),t.ajax({type:r.attr("method"),async:!0,url:r.attr("action"),data:o,dataType:"html",crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(t){n.FES.contentTransition("body",t,600)},error:function(n){"[object String]"===Object.prototype.toString.call(n)?0===n.indexOf("{")&&(n=JSON.parse(n),n.errors&&t.each(n.errors,function(t,n){console.log(n)})):console.log(n)}}),!1},onDataLoadClick:function(e){e.preventDefault();var r=t(this),o=r.data("load");if("string"!=typeof o||o.length<=0)return!1;var a=r.data("with"),i={table:o};return n.FES.isStringValidJson(a)?i=t.extend(i,JSON.parse(a)):"string"==typeof a&&(i.data=a),t.ajax({type:"GET",async:!0,url:n.FES.base_url+"/tabledata",data:i,crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},success:function(t){var e="";e=n.FES.isStringValidJson(t)?n.FES.generateDataTable(JSON.parse(t)):t,n.FES.contentTransition("#datatable",e,400)},error:function(t){console.log("error received: ",t)}}),!1}}}(jQuery,window),function(t,n,e){n.FES.Encryption=function(){this.rsa=new RSAKey},n.FES.Encryption.prototype.setPublic=function(t,n){return this.rsa.setPublic(t,n)},n.FES.Encryption.prototype.encrypt=function(t){return this.rsa.encrypt(t)}}(jQuery,window),function(t,n,e){t(document).ready(function(){t(document).on("submit","form",n.FES.onFormSubmit),t(document).on("click","[data-load]",n.FES.onDataLoadClick)}),t(function(){n.FES.getMeta("#page-meta")})}(jQuery,window);